<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>

<!--
 <copyright>
 </copyright>

 $Id: plugin.xml,v 1.12 2010/08/04 01:54:43 mparker Exp $
-->

<plugin>
    <extension
          point="org.eclipse.ui.commands">
       <category
             description="Running and Exploring Models"
             id="org.eclipse.amp.axf.ui"
             name="Model Execution Engine">
       </category>
       <command
             categoryId="org.eclipse.amp.axf.ui"
             id="org.eclipse.amp.axf.ui.start"
             name="Start">
       </command>
       <command
             categoryId="org.eclipse.amp.axf.ui"
             id="org.eclipse.amp.axf.ui.pause"
             name="Pause">
       </command>
       <command
             categoryId="org.eclipse.amp.axf.ui"
             id="org.eclipse.amp.axf.ui.step"
             name="Step">
       </command>
       <command
             categoryId="org.eclipse.amp.axf.ui"
             id="org.eclipse.amp.axf.ui.resume"
             name="Resume">
       </command>
       <command
             categoryId="org.eclipse.amp.axf.ui"
             id="org.eclipse.amp.axf.ui.stop"
             name="Stop">
       </command>
       <command
             categoryId="org.eclipse.amp.axf.ui"
             id="org.eclipse.amp.axf.ui.restart"
             name="Restart">
       </command>
       <command
             categoryId="org.eclipse.amp.axf.ui"
             id="org.eclipse.amp.axf.ui.close"
             name="Close">
       </command>
    </extension>
    <extension
          point="org.eclipse.ui.menus">
       <menuContribution
             locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
                <toolbar
                      id="org.eclipse.amp.axf.ui.execute"
                      label="Control">
                   <command
                         commandId="org.eclipse.amp.axf.ui.start"
                         disabledIcon="icons/dtool16/run_exc.gif"
                         icon="icons/etool16/run_exc.gif"
                         label="Start"
                         style="push">
                      <visibleWhen
                            checkEnabled="false">
                         <reference
                               definitionId="org.eclipse.amp.axf.ui.active">
                         </reference>
                      </visibleWhen>
                   </command>
                   <command
                         commandId="org.eclipse.amp.axf.ui.restart"
                         icon="icons/etool16/run_restart.gif"
                         label="Restart"
                         style="push">
                      <visibleWhen
                            checkEnabled="false">
                         <reference
                               definitionId="org.eclipse.amp.axf.ui.active">
                         </reference>
                      </visibleWhen>
                   </command>
                   <command
                         commandId="org.eclipse.amp.axf.ui.pause"
                         disabledIcon="icons/dtool16/run_pause.gif"
                         icon="icons/etool16/run_pause.gif"
                         label="Pause"
                         style="push">
                      <visibleWhen
                            checkEnabled="false">
                         <reference
                               definitionId="org.eclipse.amp.axf.ui.active">
                         </reference>
                      </visibleWhen>
                   </command>
                   <command
                         commandId="org.eclipse.amp.axf.ui.step"
                         disabledIcon="icons/dtool16/run_step.gif"
                         icon="icons/etool16/run_step.gif"
                         label="Step"
                         style="push">
                      <visibleWhen
                            checkEnabled="false">
                         <reference
                               definitionId="org.eclipse.amp.axf.ui.active">
                         </reference>
                      </visibleWhen>
                   </command>
                   <command
                         commandId="org.eclipse.amp.axf.ui.resume"
                         disabledIcon="icons/dtool16/run_resume.gif"
                         icon="icons/etool16/run_resume.gif"
                         label="Resume"
                         style="push">
                      <visibleWhen
                            checkEnabled="false">
                         <reference
                               definitionId="org.eclipse.amp.axf.ui.active">
                         </reference>
                      </visibleWhen>
                   </command>
                   <command
                         commandId="org.eclipse.amp.axf.ui.stop"
                         disabledIcon="icons/dtool16/run_stop.gif"
                         icon="icons/etool16/run_stop.gif"
                         label="Stop"
                         style="push">
                      <visibleWhen
                            checkEnabled="false">
                         <reference
                               definitionId="org.eclipse.amp.axf.ui.active">
                         </reference>
                      </visibleWhen>
                   </command>
                   <command
                         commandId="org.eclipse.amp.axf.ui.close"
                         disabledIcon="icons/dtool16/run_close.gif"
                         icon="icons/etool16/run_close.gif"
                         label="Close"
                         style="push">
                      <visibleWhen
                            checkEnabled="false">
                         <reference
                               definitionId="org.eclipse.amp.axf.ui.active">
                         </reference>
                      </visibleWhen>
                   </command>
                <control
                      class="org.eclipse.amp.axf.ide.view.ScaleGranularityControl"
                      id="org.eclipse.amp.axf.view.ui.slider">
                   <visibleWhen
                         checkEnabled="false">
                      <reference
                            definitionId="org.eclipse.amp.axf.ui.active">
                      </reference>
                   </visibleWhen>
                </control>
                </toolbar>
       </menuContribution>
       <menuContribution
             locationURI="menu:org.eclipse.ui.main.menu?after=additions">
             <menu
                   id="org.eclipse.amp.axf.ui.menu"
                   label="Control">
             <command
                   commandId="org.eclipse.amp.axf.ui.start"
                   disabledIcon="icons/dtool16/run_exc.gif"
                   icon="icons/etool16/run_exc.gif"
                   label="Start"
                   style="push"
                   tooltip="Begin executing the model from time 0.">
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="org.eclipse.amp.axf.ui.active">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.amp.axf.ui.restart"
                   icon="icons/etool16/run_restart.gif"
                   label="Restart"
                   style="push"
                   tooltip="Stop the current run and begin a new one.">
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="org.eclipse.amp.axf.ui.active">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.amp.axf.ui.pause"
                   disabledIcon="icons/dtool16/run_pause.gif"
                   icon="icons/etool16/run_pause.gif"
                   label="Pause"
                   style="push"
                   tooltip="Temporarily suspend model execution.">
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="org.eclipse.amp.axf.ui.active">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.amp.axf.ui.step"
                   disabledIcon="icons/dtool16/run_step.gif"
                   icon="icons/etool16/run_step.gif"
                   label="Step"
                   style="push"
                   tooltip="Move the model forward one step.">
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="org.eclipse.amp.axf.ui.active">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.amp.axf.ui.resume"
                   disabledIcon="icons/dtool16/run_resume.gif"
                   icon="icons/etool16/run_resume.gif"
                   label="Resume"
                   style="push"
                   tooltip="Resume the active model.">
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="org.eclipse.amp.axf.ui.active">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.amp.axf.ui.stop"
                   disabledIcon="icons/dtool16/run_stop.gif"
                   icon="icons/etool16/run_stop.gif"
                   label="Stop"
                   style="push"
                   tooltip="Stop executing the current model. You will not be able to continue executing the same model.">
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="org.eclipse.amp.axf.ui.active">
                   </reference>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.amp.axf.ui.close"
                   disabledIcon="icons/dtool16/run_close.gif"
                   icon="icons/etool16/run_close.gif"
                   label="Close"
                   style="push"
                   tooltip="Close the model. If no models remain excuting, the model exection session will end.">
                <visibleWhen
                      checkEnabled="false">
                   <reference
                         definitionId="org.eclipse.amp.axf.ui.active">
                   </reference>
                </visibleWhen>
             </command>
             </menu>
       </menuContribution>
    </extension>
 <extension point="org.eclipse.core.expressions.definitions">
      <definition
            id="org.eclipse.amp.axf.ui.active">
         <with
               variable="activeContexts">
            <iterate
                  operator="or">
               <equals
                     value="org.eclipse.amp.axf.executionContext">
               </equals>
            </iterate>
         </with>
      </definition>
   </extension> 
  <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.amp.axf.ui.start"
            contextId="org.eclipse.amp.axf.activeEditorContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+.">
      </key>
      <key
            commandId="org.eclipse.amp.axf.ui.restart"
            contextId="org.eclipse.amp.axf.activeEditorContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+,">
      </key>
      <key
            commandId="org.eclipse.amp.axf.ui.pause"
            contextId="org.eclipse.amp.axf.activeEditorContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+K">
      </key>
      <key
            commandId="org.eclipse.amp.axf.ui.resume"
            contextId="org.eclipse.amp.axf.activeEditorContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+L">
      </key>
      <key
            commandId="org.eclipse.amp.axf.ui.step"
            contextId="org.eclipse.amp.axf.activeEditorContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+SPACE">
      </key>
    </extension>
  <extension
        point="org.eclipse.ui.contexts">
     <context
           description="Executing model within Eclipse"
           id="org.eclipse.amp.axf.executionContext"
           name="Model Executing"
           parentId="org.eclipse.ui.contexts.window">
     </context>
     <context
           id="org.eclipse.amp.axf.activeEditorContext"
           name="Model View">
     </context>
  </extension>

  <extension
        point="org.eclipse.ui.views">
     <view
           allowMultiple="false"
           category="org.eclipse.amp.axf.views"
           class="org.eclipse.amp.axf.ide.ModelManagerViewPart"
           icon="icons/etool16/model_mananger.gif"
           id="org.eclipse.amp.view.ModelManager"
           name="Model Manager"
           restorable="true">
     </view>
  </extension>
  <extension
        point="org.eclipse.ui.perspectives">
     <perspective
           class="org.eclipse.amp.axf.ide.ExecutionPerspectiveFactory"
           icon="icons/etool16/execution16.png"
           id="org.eclipse.amp.axf.ExecutionPerspective"
           name="Agent Execution">
        <description>
           Executing Agent Models.
        </description>
     </perspective>
  </extension>
    <extension point="org.eclipse.ui.perspectiveExtensions"> 
        <perspectiveExtension
             targetID="org.eclipse.amp.axf.ExecutionPerspective"> 
           <view
                 id="org.eclipse.jdt.ui.PackageExplorer"
                 minimized="false"
                 ratio=".25"
                 relationship="left"
                 relative="org.eclipse.ui.editorss"
                 standalone="false"
                 visible="true">
           </view>
           <view
                 id="org.eclipse.ui.views.PropertySheet"
                 minimized="false"
                 ratio=".70"
                 relationship="bottom"
                 relative="org.eclipse.jdt.ui.PackageExplorer"
                 visible="true">
           </view>
           <view
                 id="org.eclipse.ui.views.ProblemView"
                 minimized="true"
                 ratio=".8"
                 relationship="bottom"
                 relative="org.eclipse.ui.editorss"
                 visible="true">
           </view>
           <view
                 id="org.eclipse.ui.console.ConsoleView"
                 minimized="true"
                 relationship="stack"
                 relative="org.eclipse.ui.views.ProblemView"
                 visible="true">
           </view>
           <view
                 id="org.eclipse.pde.runtime.LogView"
                 minimized="true"
                 relationship="stack"
                 relative="org.eclipse.ui.views.ProblemView"
                 visible="true">
           </view>
           <view
                 id="org.eclipse.ui.views.ProgressView"
                 minimized="false"
                 relationship="stack"
                 relative="org.eclipse.ui.views.ProblemView">
           </view>
           <view
                 id="org.eclipse.amp.view.ModelManager"
                 relationship="stack"
                 relative="org.eclipse.ui.views.PropertySheet"
                 visible="true">
           </view>
           <viewShortcut
                 id="org.eclipse.ui.views.PropertySheet">
           </viewShortcut>
           <viewShortcut
                 id="org.eclipse.ui.views.ProblemView">
           </viewShortcut>
           <viewShortcut
                 id="org.eclipse.ui.console.ConsoleView">
           </viewShortcut>
           <viewShortcut
                 id="org.eclipse.pde.runtime.LogView">
           </viewShortcut>
           <viewShortcut
                 id="org.eclipse.jdt.ui.SourceView">
           </viewShortcut>
           <viewShortcut
                 id="org.eclipse.ui.views.ProgressView">
           </viewShortcut>
           <viewShortcut
                 id="org.eclipse.amp.view.ModelManager">
           </viewShortcut>
           </perspectiveExtension>
<!--       <perspectiveExtension
             targetID="???">
          <perspectiveShortcut
                id="org.eclipse.amp.axf.ExecutionPerspective">
          </perspectiveShortcut>
          <newWizardShortcut
                id="org.eclipse.amp.escape.wizards.newProject">
          </newWizardShortcut>
          <newWizardShortcut
                id="org.eclipse.amp.escape.wizards.newParameters">
          </newWizardShortcut>
          <newWizardShortcut
                id="org.eclipse.amp.escape.wizards.newTest">
          </newWizardShortcut>
       </perspectiveExtension> -->
       <perspectiveExtension
             targetID="org.eclipse.jdt.ui.JavaPerspective">
          <perspectiveShortcut
                id="org.eclipse.amp.axf.ExecutionPerspective">
          </perspectiveShortcut>
       </perspectiveExtension>
    </extension>
    <extension
          point="org.eclipse.ui.startup">
       <startup
             class="org.eclipse.amp.axf.ide.AXFWorkbenchPlugin">
       </startup>
    </extension>
    <extension
          point="org.eclipse.ui.handlers">
       <handler
             class="org.eclipse.amp.axf.ide.handlers.StartHandler"
             commandId="org.eclipse.amp.axf.ui.start">
          <enabledWhen>
             <with
                   variable="org.eclipse.amp.axf.ide.engine.state">
                <or>
                   <equals
                         value="IDLE">
                   </equals>
                   <equals
                         value="ENDED">
                   </equals>
                </or>
             </with>
          </enabledWhen>
       </handler>
       <handler
             class="org.eclipse.amp.axf.ide.handlers.StopHandler"
             commandId="org.eclipse.amp.axf.ui.stop">
          <enabledWhen>
             <with
                   variable="org.eclipse.amp.axf.ide.engine.state">
                <or>
                   <equals
                         value="RUNNING">
                   </equals>
                   <equals
                         value="PAUSED">
                   </equals>
                </or>
             </with>
          </enabledWhen>
       </handler>
       <handler
             class="org.eclipse.amp.axf.ide.handlers.PauseHandler"
             commandId="org.eclipse.amp.axf.ui.pause">
          <enabledWhen>
             <with
                   variable="org.eclipse.amp.axf.ide.engine.state">
                <equals
                      value="RUNNING">
                </equals>
             </with>
          </enabledWhen>
       </handler>
       <handler
             class="org.eclipse.amp.axf.ide.handlers.StepHandler"
             commandId="org.eclipse.amp.axf.ui.step">
          <enabledWhen>
             <with
                   variable="org.eclipse.amp.axf.ide.engine.state">
                <equals
                      value="PAUSED">
                </equals>
             </with>
          </enabledWhen>
       </handler>
       <handler
             class="org.eclipse.amp.axf.ide.handlers.ResumeHandler"
             commandId="org.eclipse.amp.axf.ui.resume">
          <enabledWhen>
             <with
                   variable="org.eclipse.amp.axf.ide.engine.state">
                <equals
                      value="PAUSED">
                </equals>
             </with>
          </enabledWhen>
       </handler>
       <handler
             class="org.eclipse.amp.axf.ide.handlers.RestartHandler"
             commandId="org.eclipse.amp.axf.ui.restart">
          <enabledWhen>
             <with
                   variable="org.eclipse.amp.axf.ide.engine.state">
                <or>
                   <equals
                         value="RUNNING">
                   </equals>
                   <equals
                         value="PAUSED">
                   </equals>
                   <equals
                         value="ENDED">
                   </equals>
                </or>
             </with>
          </enabledWhen>
       </handler>
       <handler
             class="org.eclipse.amp.axf.ide.handlers.CloseHandler"
             commandId="org.eclipse.amp.axf.ui.close">
          <enabledWhen>
             <with
                   variable="org.eclipse.amp.axf.ide.engine.state">
                <or>
                   <equals
                         value="IDLE">
                   </equals>ls>
                   <equals
                         value="PAUSED">
                   </equals>
                   <equals
                         value="RUNNING">
                   </equals>
                   <equals
                         value="ENDED">
                   </equals>
                </or>
             </with>
          </enabledWhen>
       </handler>
    </extension>
    <extension
          point="org.eclipse.ui.services">
       <sourceProvider
             provider="org.eclipse.amp.axf.ide.EngineStateService">
          <variable
                name="org.eclipse.amp.axf.ide.engine.state"
                priorityLevel="workbench">
          </variable>
       </sourceProvider>
    </extension>
 </plugin>

